<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¼ë©´ ì¡°ë¦¬ ë„ìš°ë¯¸</title>
  <style>
    :root {
      --bg:#0b0c10; --card:#111318; --muted:#868e96; --fg:#e9ecef; --accent:#7cfc00;
      --border:#262a33; --chip:#1b1e26;
    }
    * { box-sizing: border-box; }
    body {
      margin:0; background:linear-gradient(180deg,#0b0c10 0%, #0d1117 100%); color:var(--fg);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      line-height:1.55;
    }
    header {
      position: sticky; top:0; backdrop-filter: blur(8px);
      background: rgba(13,17,23,0.6); border-bottom:1px solid var(--border);
      padding:12px 16px; z-index:10;
      display:flex; align-items:center; gap:12px;
    }
    header h1 { font-size:16px; margin:0; font-weight:700; letter-spacing: .3px; }
    header .hint { color:var(--muted); font-size:12px; }
    main { max-width:980px; margin: 20px auto; padding: 0 16px 80px; }
    .row { display:flex; gap:16px; align-items:stretch; }
    .col { flex:1; }
    .card {
      background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px;
      box-shadow: 0 12px 24px rgba(0,0,0,.25);
    }
    .card h2 { margin:0 0 8px; font-size:14px; letter-spacing:.3px; color:#cbd3da }
    .chips { display:flex; flex-wrap:wrap; gap:8px; }
    .chip {
      background:var(--chip); border:1px solid var(--border); padding:6px 10px; border-radius:999px;
      font-size:12px; color:#cbd3da; cursor:pointer;
    }
    .chip:hover { border-color:#2f3540 }
    .profiles-list { display:flex; gap:8px; flex-wrap:wrap; }
    .profile-item {
      background:var(--chip); border:1px solid var(--border); padding:8px 10px; border-radius:10px; cursor:pointer;
    }
    .profile-item.active { outline:2px solid var(--accent); }
    .facts { display:grid; grid-template-columns: 1fr 1fr; gap:8px 12px; margin-top:8px; }
    .facts .k { color:#9aa4ae; font-size:12px }
    .facts .v { font-weight:600; }
    .bubbles { display:flex; flex-direction:column; gap:8px; }
    .bubble {
      max-width:80%; padding:10px 12px; border-radius:14px; border:1px solid var(--border);
      background:#0f1420; animation: slide .15s ease-out;
      white-space: pre-wrap;
    }
    .bubble.me { margin-left:auto; background:#152035; }
    .bubble.ai { margin-right:auto; }
    @keyframes slide { from { transform: translateY(6px); opacity:.0 } to { transform: none; opacity:1 } }
    .composer { position:fixed; left:0; right:0; bottom:0; padding:12px 16px; background:rgba(13,17,23,.75); border-top:1px solid var(--border); backdrop-filter: blur(10px); }
    .composer form { max-width:980px; margin:0 auto; display:flex; gap:8px; }
    input[type="text"] {
      flex:1; padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:#0f1420; color:var(--fg);
    }
    button {
      padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:#172034; color:var(--fg); cursor:pointer;
    }
    button.primary { background:#1b2a4b; border-color:#28406f; }
    .muted { color:var(--muted); font-size:12px; }
    .mt8 { margin-top:8px } .mt12{ margin-top:12px } .mt16{ margin-top:16px }
    .hidden { display:none !important; }
  </style>
</head>
<body>
  <header>
    <h1>ë¼ë©´ ì¡°ë¦¬ ë„ìš°ë¯¸</h1>
    <div class="hint">í‚¤ì›Œë“œ: "í”„ë¡œí•„ ëª©ë¡", "ìš”ì•½", "ë‚¨ì€ ì§ˆë¬¸", "â—‹â—‹ë¡œ ì „í™˜", "êµ­ë¬¼ ì„±í–¥"</div>
    <div style="margin-left:auto; display:flex; gap:8px;">
      <button id="btnLoad">ì„¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸°</button>
      <button id="btnSave">ì„¸ì…˜ ì €ì¥</button>
    </div>
  </header>

  <main>
    <div class="row">
      <div class="col card">
        <h2>ëŒ€í™”</h2>
        <div id="bubbles" class="bubbles"></div>
      </div>
      <div class="col card">
        <h2>í”„ë¡œí•„</h2>
        <div id="profiles" class="profiles-list"></div>
        <div id="facts" class="facts mt12"></div>
        <div class="mt12 muted">í•„ë“œ: ë¬¼ëŸ‰(ml), ì‚¶ëŠ” ì‹œê°„, êµ­ë¬¼ ì„±í–¥, ê³„ë€ ìŠ¤íƒ€ì¼</div>
        <div class="mt16">
          <div class="chips">
            <div class="chip" data-q="í”„ë¡œí•„ ëª©ë¡">í”„ë¡œí•„ ëª©ë¡</div>
            <div class="chip" data-q="ìš”ì•½">ìš”ì•½</div>
            <div class="chip" data-q="ë‚¨ì€ ì§ˆë¬¸">ë‚¨ì€ ì§ˆë¬¸</div>
            <div class="chip" data-q="ì‹ ë¼ë©´ìœ¼ë¡œ ì „í™˜">ì‹ ë¼ë©´ ì „í™˜</div>
            <div class="chip" data-q="êµ­ë¬¼ ì„±í–¥ì€ ì–¼í°í•˜ê²Œ">êµ­ë¬¼ ì„±í–¥</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div class="composer">
    <form id="form">
      <input id="input" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: ë‚¨ì€ ì§ˆë¬¸ / ì§„ë¼ë©´ìœ¼ë¡œ ì „í™˜ / ë¬¼ 550ml" />
      <button class="primary" type="submit">ë³´ë‚´ê¸°</button>
    </form>
  </div>

<script>
//0) ìœ í‹¸
const normalize = s => s.normalize('NFC').toLowerCase().replace(/\s+/g, ' ').trim();  //ì…ë ¥ ì •ê·œí™”
const squish    = s => s.replace(/\s/g, ''); //ê³µë°±ì œê±°
const say = (text, who='ai') => {   //ëŒ€í™” ì‹œê°í™”
  const wrap = document.createElement('div');
  wrap.className = 'bubble ' + (who === 'me' ? 'me' : 'ai');
  wrap.textContent = text;
  document.querySelector('#bubbles').appendChild(wrap);
  wrap.scrollIntoView({behavior:'smooth', block:'end'});
};
const byId = id => document.getElementById(id); 

//1) State & Persistence

//ì „ì²´ ìƒíƒœ
const STATE = {
  version: 1,                         //ë°ì´í„° êµ¬ì¡° ë²„ì „    
  active: null,                       //í™œì„± í”„ë¡œí•„
  profiles: {},                       //ë¼ë©´ ê°ì²´ ì €ì¥ì†Œ
  doneNotified: false,                //ì™„ë£Œ ë©˜íŠ¸ ì¤‘ë³µ ë°©ì§€
  schema: { customQuestions: [] },    //ì‚¬ìš©ì ì •ì˜ ì§ˆë¬¸ ì €ì¥ì†Œ(ë¯¸êµ¬í˜„)
  synonyms: {},                       //ë™ì˜ì–´ ì €ì¥ì†Œ(ë¯¸êµ¬í˜„)
  stats: {}                           //í†µê³„ ì €ì¥ì†Œ (ë¯¸êµ¬í˜„)
};

function ensureProfile(name) {     
  if (!STATE.profiles[name]) {    //ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí•„ ì—†ì„ ë•Œ ìƒì„±
    STATE.profiles[name] = {
      facts: {},                  //ë¼ë©´ ì†ì„± ê°’ 
      history: [],                //ëŒ€í™” ë‚´ìš© 
      createdAt: Date.now(),      //ìƒì„± ì‹œê°„
      updatedAt: Date.now()       //ìµœì¢… ìˆ˜ì • ì‹œê°„
    };
  }

  if (!STATE.active) STATE.active = name; //ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí•„ ì¡´ì¬ì‹œ í™œì„±í”„ë¡œí•„ì— ë“±ë¡
}

function getActiveProfile() {         //í™œì„±í™”ëœ ë¼ë©´ì˜ ì •ë³´ ë°˜í™˜
  if (!STATE.active) return null;
  return STATE.profiles[STATE.active];
}

function getRemainingFields(p = getActiveProfile()) {
  if (!p) return [];                                                //í™œì„± í”„ë¡œí•„ ì—†ì„ ë•Œ ë¹ˆ ë°°ì—´ ë°˜í™˜
  const NEED = ['water_ml','boil_time','soup_profile','egg_style']; //í•„ìˆ˜ ì†ì„±
  return NEED.filter(k => !p.facts[k]);                           //ê°’ì´ ë¹„ì–´ìˆëŠ” ì†ì„± ë°˜í™˜
}

async function loadFromFileHandle(handle) { //ì €ì¥ëœ ì„¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸° 
  const file = await handle.getFile();      //íŒŒì¼ ë‚´ìš©ì„ ê°€ì ¸ì˜´
  const text = await file.text();           //íŒŒì¼ ë‚´ë¶€ì˜ í…ìŠ¤íŠ¸ë¥¼ ì½ìŒ
  const data = JSON.parse(text);            //JSON ë¬¸ìì—´ì„ JAVAscript ê°ì²´ë¡œ ë³€í™˜
  
  ['version','profiles','active','schema','synonyms','stats'].forEach(k => {
    if (data[k] !== undefined) STATE[k] = data[k];
  });                                       //í•´ë‹¹ ë‚´ìš©ì„ STATEì— ë®ì–´ì”Œì›€
  renderProfiles();
  renderFacts();
  say('ì„¸ì…˜ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');               //ë§í’ì„  ì¶œë ¥
}

async function saveToFileHandle(handle) {                 //ì„¸ì…˜ ì €ì¥
  const writable = await handle.createWritable();         //íŒŒì¼ì„ ì“°ê¸° ëª¨ë“œë¡œ ì¤€ë¹„
  await writable.write(JSON.stringify(STATE, null, 2));   //STATE ë‚´ìš©ì„ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ íŒŒì¼ì— ê¸°ë¡
  await writable.close();   
  say('ì„¸ì…˜ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤.');
}

let fileHandle = null;  

//2) Intent Module
const INTENTS = [
  {
    name: 'LIST_PROFILES',
    anyOf: ['í”„ë¡œí•„ ëª©ë¡','í”„ë¡œí•„ ë³´ì—¬ì¤˜','í”„ë¡œí•„ ì•Œë ¤ì¤˜','ëª©ë¡','ë¦¬ìŠ¤íŠ¸'],
    regex: [/(í”„ë¡œí•„|ë¼ë©´).*(ëª©ë¡|ë¦¬ìŠ¤íŠ¸|ë³´ì—¬ì¤˜|ì•Œë ¤ì¤˜)/]
  },
  {
    name: 'SUMMARY',
    anyOf: ['ìš”ì•½','ì •ë¦¬','ìš”ì•½í•´ì¤˜','ì •ë¦¬í•´ì¤˜'],
    regex: [/(ìš”ì•½|ì •ë¦¬)(í•´ì¤˜|í•´ë´|í•´ì¤„ë˜)?$/]
  },
  {
    name: 'REMAINING',
    anyOf: ['ë‚¨ì€ì§ˆë¬¸','ë‚¨ì€ ì§ˆë¬¸','ë¯¸ë‹µë³€','ì¶©ì¡±ë„','ì™„ë£Œìœ¨']
  },
  {
    name: 'SWITCH_PROFILE',
    regex: [/(.+?)(?:ìœ¼)?ë¡œ\s*(ì „í™˜|ë°”ê¿”ì¤˜|ë°”ê¿”)$/],
    extract: (m) => ({ target: m[1].trim() })
  },
  {
    name: 'ASK_SOUP_PROFILE',
    regex: [/((êµ­ë¬¼|ìŠ¤í”„).*(ì„±í–¥|ë§›)|ë§›\s*ì„±í–¥)/]
  },
];

function guessField(t) {
  if (/ë¬¼|ml|cc/.test(t)) return 'water_ml';
  if (/(ì‚¶|ë“|íƒ€ì´ë¨¸|ë¶„|ì´ˆ)/.test(t)) return 'boil_time';
  if (/ê³„ë€|ë‹¬ê±€|ìˆ˜ë€|ë°˜ìˆ™|ì™„ìˆ™|ìŠ¤í¬ë¨ë¸”/.test(t)) return 'egg_style';
  if (/((êµ­ë¬¼|ìŠ¤í”„).*(ì„±í–¥|ë§›)|ë§›\s*ì„±í–¥)/.test(t)) return 'soup_profile';
  return null;
}

function detectIntent(raw) {
  const t = normalize(raw);
  const tNS = squish(t);
  for (const it of INTENTS) {
    if (it.anyOf && it.anyOf.some(k => {
      const nk = normalize(k);
      return t.includes(nk) || tNS.includes(squish(nk));
    })) return { type: it.name };
    if (it.regex) for (const r of it.regex) {
      const m = t.match(r);
      if (m) return { type: it.name, ...(it.extract ? it.extract(m) : {}) };
    }
  }
  const field = guessField(t);
  return field ? { type: 'ASK_FIELD', field } : { type: 'UNKNOWN' };
}

//3) Domain Handlers
function showProfiles() {
  const names = Object.keys(STATE.profiles);
  if (names.length === 0) return say('ì €ì¥ëœ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤. ì˜ˆ: "ì‹ ë¼ë©´ìœ¼ë¡œ ì „í™˜"ì„ ì…ë ¥í•´ ìƒˆ í”„ë¡œí•„ì„ ë§Œë“œì„¸ìš”.');
  say('í”„ë¡œí•„ ëª©ë¡: ' + names.map(n => STATE.active === n ? `${n}â˜…` : n).join(', '));
}

function showSummary() {
  const p = getActiveProfile();
  if (!p) return say('í™œì„± í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € "â—‹â—‹ë¡œ ì „í™˜"ìœ¼ë¡œ í”„ë¡œí•„ì„ ì„ íƒí•˜ì„¸ìš”.');
  const w  = p.facts.water_ml   || 'ë¬¼ëŸ‰ ë¯¸ì •';
  const bt = p.facts.boil_time  || 'ì‹œê°„ ë¯¸ì •';
  const sp = p.facts.soup_profile || 'êµ­ë¬¼ ì„±í–¥ ë¯¸ì •';
  const egg= p.facts.egg_style  || 'ê³„ë€ ë¯¸ì •';
  say(`í˜„ì¬ ì„¤ì •: ë¬¼ ${w}, ì‚¶ê¸° ${bt}, êµ­ë¬¼ ${sp}, ê³„ë€ ${egg}.` + 
      (getRemainingFields(p).length ? ' í•µì‹¬ ì„¸íŒ…ì´ ê±°ì˜ ì±„ì›Œì¡Œì–´ìš”!' : ' í•µì‹¬ ì„¸íŒ… ì™„ë£Œ!'));
}

function showRemaining() {
  const p = getActiveProfile();
  if (!p) return say('í™œì„± í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.');
  const rem = getRemainingFields(p);
  if (rem.length === 0) {
    if (!STATE.doneNotified) {
      STATE.doneNotified = true;
      say('ëª¨ë“  í•µì‹¬ ì„¸íŒ…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰ "ìš”ì•½"ì„ í™•ì¸í•´ ë³´ì„¸ìš”.');
    } else {
      say('ì´ë¯¸ ëª¨ë“  í•­ëª©ì´ ì±„ì›Œì¡ŒìŠµë‹ˆë‹¤. "ìš”ì•½"ì„ ì…ë ¥í•´ ë³´ì„¸ìš”!');
    }
  } else {
    STATE.doneNotified = false;
    say(`ë‚¨ì€ ì§ˆë¬¸: ${rem.join(', ')}`);
  }
}

function switchProfile(target) {
  if (!target) return say('ì „í™˜í•  í”„ë¡œí•„ ì´ë¦„ì´ í•„ìš”í•´ìš”.');
  ensureProfile(target);
  STATE.active = target;
  STATE.profiles[target].updatedAt = Date.now();
  renderProfiles();
  renderFacts();
  say(`í”„ë¡œí•„ì„ [${target}]ìœ¼ë¡œ ì „í™˜í–ˆì–´ìš”.`);
}

function askField(field, input) {
  const p = getActiveProfile();
  if (!p) return say('ë¨¼ì € í”„ë¡œí•„ì„ ì„ íƒí•˜ì„¸ìš”. "ì‹ ë¼ë©´ìœ¼ë¡œ ì „í™˜" ë“±ì„ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.');
  // ê°„ë‹¨ íŒŒì„œ
  const t = normalize(input);
  if (field === 'water_ml') {
    const m = t.match(/(\d{2,4})\s*(ml|cc)?/);
    if (m) {
      p.facts.water_ml = `${m[1]}ml`;
      renderFacts(); say(`ë¬¼ëŸ‰ì„ ${p.facts.water_ml}ë¡œ ê¸°ë¡í–ˆì–´ìš”.`); return;
    }
    return say('ë¬¼ ìš©ëŸ‰ì„ ì•Œë ¤ì£¼ì„¸ìš”. ì˜ˆ: 500ml');
  }
  if (field === 'boil_time') {
    const m = t.match(/(\d+)\s*ë¶„?\s*(\d+)?\s*ì´ˆ?/);
    if (m) {
      const mm = m[1], ss = m[2]||'0';
      p.facts.boil_time = `${mm}ë¶„ ${ss}ì´ˆ`;
      renderFacts(); say(`ì‚¶ëŠ” ì‹œê°„ì„ ${p.facts.boil_time}ë¡œ ê¸°ë¡í–ˆì–´ìš”.`); return;
    }
    return say('ì‚¶ëŠ” ì‹œê°„ì„ ì•Œë ¤ì£¼ì„¸ìš”. ì˜ˆ: 4ë¶„ 30ì´ˆ');
  }
  if (field === 'soup_profile') {
    const m = t.match(/(ìˆœí•œë§›|ë‹´ë°±|ì ë‹¹íˆ ë§¤ìš´ë§›|ì–¼í°|ë§¤ìš´|ì§„í•œ|ê°€ë²¼ìš´)/);
    p.facts.soup_profile = m ? m[1].replace('ì–¼í°','ì–¼í°í•œ') : 'ê¸°ë³¸';
    renderFacts(); return say(`êµ­ë¬¼ ì„±í–¥ì„ ${p.facts.soup_profile}ìœ¼ë¡œ ê¸°ë¡í–ˆì–´ìš”.`);
  }
  if (field === 'egg_style') {
    const m = t.match(/(ìˆ˜ë€|ë°˜ìˆ™|ì™„ìˆ™|ìŠ¤í¬ë¨ë¸”|ê³„ë€ ì—†ìŒ)/);
    p.facts.egg_style = m ? m[1] : 'ê³„ë€ ì—†ìŒ';
    renderFacts(); return say(`ê³„ë€ ìŠ¤íƒ€ì¼ì„ ${p.facts.egg_style}ë¡œ ê¸°ë¡í–ˆì–´ìš”.`);
  }
  return say('í•´ë‹¹ í•„ë“œë¥¼ ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”.');
}

function handleField(field, input) {
  if (!field) return say('ë¬´ìŠ¨ ëœ»ì¸ì§€ ì˜ ëª» ì•Œì•„ë“¤ì—ˆì–´ìš”. "ë‚¨ì€ ì§ˆë¬¸"ì´ë‚˜ "ìš”ì•½"ì„ ì‹œë„í•´ ë³´ì„¸ìš”.');
  return askField(field, input);
}

/* ========================
   4) UI Render
======================== */
function renderProfiles() {
  const root = byId('profiles'); root.innerHTML='';
  const names = Object.keys(STATE.profiles);
  if (names.length === 0) { root.textContent = 'í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.'; return; }
  names.forEach(n => {
    const el = document.createElement('div');
    el.className = 'profile-item' + (STATE.active === n ? ' active' : '');
    el.textContent = n;
    el.onclick = () => switchProfile(n);
    root.appendChild(el);
  });
}

function renderFacts() {
  const root = byId('facts'); root.innerHTML='';
  const p = getActiveProfile();
  if (!p) { root.textContent = 'í™œì„± í”„ë¡œí•„ ì—†ìŒ'; return; }
  const pairs = [
    ['ë¬¼ëŸ‰(ml)','water_ml'], ['ì‚¶ëŠ” ì‹œê°„','boil_time'],
    ['êµ­ë¬¼ ì„±í–¥','soup_profile'], ['ê³„ë€ ìŠ¤íƒ€ì¼','egg_style']
  ];
  for (const [k, key] of pairs) {
    const rowK = document.createElement('div'); rowK.className='k'; rowK.textContent=k;
    const rowV = document.createElement('div'); rowV.className='v'; rowV.textContent=p.facts[key]||'-';
    root.appendChild(rowK); root.appendChild(rowV);
  }
}

/* ========================
   5) Orchestrator
======================== */
function answerQuestion(input) {
  const intent = detectIntent(input);
  switch (intent.type) {
    case 'LIST_PROFILES': return showProfiles();
    case 'SUMMARY': return showSummary();
    case 'REMAINING': return showRemaining();
    case 'SWITCH_PROFILE': return switchProfile(intent.target);
    case 'ASK_SOUP_PROFILE': return askField('soup_profile', input);
    case 'ASK_FIELD': return handleField(intent.field, input);
    case 'UNKNOWN':
    default: return say('ì˜ ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”. "ë‚¨ì€ ì§ˆë¬¸", "ìš”ì•½", "â—‹â—‹ë¡œ ì „í™˜" ë“±ì„ ì‹œë„í•´ ë³´ì„¸ìš”.');
  }
}

/* ========================
   6) Events
======================== */
byId('form').addEventListener('submit', (e) => {
  e.preventDefault();
  const inp = byId('input');
  const text = inp.value.trim();
  if (!text) return;
  say(text, 'me');
  answerQuestion(text);
  // ê¸°ë¡
  const p = getActiveProfile();
  if (p) {
    p.history.push({role:'me', text});
    if (p.history.length > 200) p.history.shift();
    p.updatedAt = Date.now();
  }
  inp.value='';
});

document.addEventListener('click', (e) => {
  const chip = e.target.closest('.chip');
  if (chip?.dataset.q) {
    const q = chip.dataset.q;
    say(q, 'me');
    answerQuestion(q);
  }
});

byId('btnLoad').addEventListener('click', async () => {
  if (!window.showOpenFilePicker) { say('ì´ ë¸Œë¼ìš°ì €ëŠ” íŒŒì¼ ì„ íƒ APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); return; }
  try {
    const [h] = await showOpenFilePicker({types:[{description:'JSON', accept:{'application/json':['.json']}}]});
    fileHandle = h;
    await loadFromFileHandle(h);
  } catch (e) {
    // ì·¨ì†Œ ë“±
  }
});

byId('btnSave').addEventListener('click', async () => {
  if (!window.showSaveFilePicker) { say('ì´ ë¸Œë¼ìš°ì €ëŠ” íŒŒì¼ ì €ì¥ APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); return; }
  try {
    if (!fileHandle) {
      fileHandle = await showSaveFilePicker({suggestedName:'ramen_session.json', types:[{description:'JSON', accept:{'application/json':['.json']}}]});
    }
    await saveToFileHandle(fileHandle);
  } catch (e) {
    // ì·¨ì†Œ ë“±
  }
});
</script>
</body>
</html>
